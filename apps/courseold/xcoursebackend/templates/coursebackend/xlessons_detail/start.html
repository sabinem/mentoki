{% extends "base_course/base.html" %}
{% block header %}
    Vorlage {{ course.title }} / Unterricht
{% endblock %}
{% block help %}
    {% include 'base_course/_help_lessons.html' %}
{% endblock %}
{% block controls %}
    <div class="ui checkbox" id="showdescriptions">
        <input type="checkbox">
        <label>Beschreibungen anzeigen</label>
    </div>
    <div class="ui checkbox" id="status">
        <input type="checkbox">
        <label>Status</label>
    </div>
    <div class="ui checkbox" id="worklinks">
        <input type="checkbox">
        <label>Bearbeitungs-Links</label>
    </div>
    <div class="ui checkbox" id="showdisplaynr">
        <input type="checkbox">
        <label>Interne Anzeigereihenfolge</label>
    </div>
    <div class="ui checkbox" id="showpublished">
        <input type="checkbox">
        <label>Veröffentlichte Lektionen</label>
    </div>
{% endblock %}
{% block page_content %}
    <div class="ui segment">
        <div class="ui h1 header">Alle Unterrichtsblöcke</div>
        <div class="ui list">
            {% for item in block_list %}
                <div class="item">
                    <i class="top aligned icon cube"></i>
                    <div class="content">
                        <div class="header big">
                            <a class="displaynr" >
                                <span style="color:orange;">{{ item.block.display_nr }}. </span>
                            </a>
                            <a href="{% url 'course:blockdetail' slug=match.kwargs.slug block=item.block.id %}">
                                {{ item.block.title }}
                            </a>
                            <span class="accomplishment">
                                {% if item.block.status == item.block.STATUS_READY %}
                                    <i class="icon checkmark green "></i>
                                {% endif %}
                                <span class="last_modified"> (zuetzt geändert: {{ item.block.modified | date:'d.m' }})</span>
                            </span>
                            <a class="worklink"
                                href="{% url 'course:blockupdate' slug=match.kwargs.slug block=item.block.id %}">
                                <i class="write blue icon"></i>
                            </a>
                        </div>
                        <div class="contentdescription">
                            {{ item.block.description }}
                            {{ item.block.text | safe }}
                        </div>
                        <div class="ui divided list">
                            {% for unit_dict in item.units %}
                                <div class="item">
                                    {% if item.block.is_numbered %}
                                        <i class="top aligned icon">{{ unit_dict.unit.display_nr }}</i>
                                    {% else %}
                                        <i class="top aligned thin circle icon"></i>
                                    {% endif %}
                                    <div class="content">
                                        <div class="header">
                                            <a href="{% url 'course:unitdetail' slug=match.kwargs.slug unit=unit_dict.unit.id %}">
                                                {{ unit_dict.unit.title }}
                                            </a>
                                            <span class="accomplishment">
                                                {% if unit_dict.unit.status == unit_dict.unit.STATUS_READY %}
                                                    <i class="icon checkmark green "></i>
                                                {% endif %}
                                                <span class="last_modified">
                                                    (zuetzt geändert: {{ unit_dict.unit.modified | date:'d.m' }})
                                                </span>
                                            </span>
                                            {% if unit_dict.published %}
                                                 <i class="publishinfo checkmark icon pink"></i>
                                            {% endif %}
                                            <a class="worklink"
                                                href="{% url 'course:unitupdate' slug=match.kwargs.slug unit=unit_dict.unit.id %}">
                                                <i class="write blue icon"></i>
                                                </a>
                                            </a>
                                        </div>
                                        <div class="contentdescription">
                                            {{ unit_dict.unit.description }}
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
