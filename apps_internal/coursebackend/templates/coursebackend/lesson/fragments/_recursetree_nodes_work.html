{% load mptt_tags %}

<div class="ui divided list">

    {% recursetree nodes %}

        <div class="item">
        
            {% include 'coursebackend/lesson/fragments/_icon_node.html' %}

            <div class="content">
                <div class="header">
                    <a
                        {% include 'coursebackend/lesson/fragments/_link_node_detail.html' %}
                    >
                         {{ node.title }}
                    </a>
                    {% if node.is_homework %}
                         <a><i class="icon lab orange"></i></a>
                    {% endif %}

                    {% include 'coursebackend/lesson/fragments/_links_node_update.html' %}
                    {% if node.material %}

                        {% url 'coursebackend:material:update' course_slug=cs pk=node.material_id as material_url %}
                        <a href="{{ material_url }}">
                            <i class="icon file outline"></i>
                        </a>
                    {% endif %}

                </div>
                {% if url_name == 'meta' %}
                    <p style="font-size: 0.9em; color:grey; font-weight:normal;">
                       angelegt: {{ node.created |date:'d.m.Y' }}, letzte Ã„nderung: {{ node.modified |date:'d.m.Y' }}
                    </p>
                {% endif %}

                {% if not is_leaf %}
                    <div class="list">
                        {{ children }}
                    </div>
                {% endif %}

            </div>
        </div>

    {% endrecursetree %}

</div>

