# -*- coding: utf-8 -*-

from __future__ import unicode_literals

from django.views.generic import TemplateView, RedirectView, DetailView
from django.shortcuts import get_object_or_404
from django.core.exceptions import ObjectDoesNotExist, MultipleObjectsReturned
from django.db import DataError

from apps_accountdata.userprofiles.models.mentor import MentorsProfile
from apps_pagedata.textchunks.models import PublicTextChunks
from accounts.models import User
from apps_productdata.mentoki_product.models.courseproductgroup import CourseProductGroup

class PageTextMixin(object):
    context_object_name = 'textchunk'

    def get_object(self, queryset=None):
        """
        the pagechunk according to the pagecode
        """
        pagecode = self.kwargs['pagecode']
        try:
            textchunk = PublicTextChunks.objects.get(
                PublicTextChunks,
                pagecode=pagecode)
        except ObjectDoesNotExist:
            raise ValueError('sollte da sein!')
        except MultipleObjectsReturned:
            raise DataError
        return textchunk
