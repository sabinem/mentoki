# coding: utf-8

from django import forms
from django.shortcuts import render_to_response
from formtools.wizard.views import SessionWizardView, NamedUrlSessionWizardView





class PaymentForm1(forms.Form):
    """
    Participant data
    """
    username = forms.CharField(max_length=100)
    email = forms.EmailField()

class PaymentForm2(forms.Form):
    """
    Information for the payer
    """
    payment_name = forms.CharField

FORMS = [("address", myapp.forms.AddressForm),
         ("paytype", myapp.forms.PaymentChoiceForm),
         ("cc", myapp.forms.CreditCardForm),
         ("confirmation", myapp.forms.OrderForm)]

TEMPLATES = {"address": "checkout/billingaddress.html",
             "paytype": "checkout/paymentmethod.html",
             "cc": "checkout/creditcard.html",
             "confirmation": "checkout/confirmation.html"}


class TestWizard(NamedUrlSessionWizardView):
    def done(self, form_list, form_dict, **kwargs):
        return render_to_response('done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        })

from django.http import HttpResponseRedirect
from formtools.wizard.views import SessionWizardView

class ContactWizard(SessionWizardView):
    def done(self, form_list, **kwargs):
        #do_something_with_the_form_data(form_list)
        user = form_dict['user'].save()
        credit_card = form_dict['credit_card'].save()
        # ...
        return HttpResponseRedirect('/page-to-redirect-to-when-done/')